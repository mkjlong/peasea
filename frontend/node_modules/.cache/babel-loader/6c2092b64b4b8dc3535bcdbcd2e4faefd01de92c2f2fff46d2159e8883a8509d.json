{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Quiz = void 0;\nvar defines_1 = require(\"./defines\");\nvar Operation;\n(function (Operation) {\n  Operation[\"Direct\"] = \"direct\";\n  Operation[\"Swap\"] = \"swap\";\n  Operation[\"Stock\"] = \"stock\";\n})(Operation || (Operation = {}));\nvar Quiz = /** @class */function () {\n  function Quiz(quiz) {\n    this.quiz = Quiz.verify(quiz);\n  }\n  Object.defineProperty(Quiz.prototype, \"next\", {\n    get: function () {\n      var index = this.quiz.indexOf(')') + 1;\n      var name = this.quiz[index];\n      if (name === undefined || name === ';') {\n        return '';\n      }\n      return name;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Quiz.isQuizComment = function (comment) {\n    return comment.startsWith('#Q=');\n  };\n  Quiz.create = function (first, second) {\n    var create = function (hold, other) {\n      var parse = function (s) {\n        return s ? s : '';\n      };\n      return new Quiz(\"#Q=[\".concat(parse(hold), \"](\").concat(parse(other[0]), \")\").concat(parse(other.substring(1))));\n    };\n    return second !== undefined ? create(first, second) : create(undefined, first);\n  };\n  Quiz.trim = function (quiz) {\n    return quiz.trim().replace(/\\s+/g, '');\n  };\n  Object.defineProperty(Quiz.prototype, \"least\", {\n    get: function () {\n      var index = this.quiz.indexOf(')');\n      return this.quiz.substr(index + 1);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Quiz.prototype, \"current\", {\n    get: function () {\n      var index = this.quiz.indexOf('(') + 1;\n      var name = this.quiz[index];\n      if (name === ')') {\n        return '';\n      }\n      return name;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Quiz.prototype, \"hold\", {\n    get: function () {\n      var index = this.quiz.indexOf('[') + 1;\n      var name = this.quiz[index];\n      if (name === ']') {\n        return '';\n      }\n      return name;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Quiz.prototype, \"leastAfterNext2\", {\n    get: function () {\n      var index = this.quiz.indexOf(')');\n      if (this.quiz[index + 1] === ';') {\n        return this.quiz.substr(index + 1);\n      }\n      return this.quiz.substr(index + 2);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Quiz.prototype.getOperation = function (used) {\n    var usedName = (0, defines_1.parsePieceName)(used);\n    var current = this.current;\n    if (usedName === current) {\n      return Operation.Direct;\n    }\n    var hold = this.hold;\n    if (usedName === hold) {\n      return Operation.Swap;\n    }\n    // 次のミノを利用できる\n    if (hold === '') {\n      if (usedName === this.next) {\n        return Operation.Stock;\n      }\n    } else {\n      if (current === '' && usedName === this.next) {\n        return Operation.Direct;\n      }\n    }\n    throw new Error(\"Unexpected hold piece in quiz: \".concat(this.quiz));\n  };\n  Object.defineProperty(Quiz.prototype, \"leastInActiveBag\", {\n    get: function () {\n      var separateIndex = this.quiz.indexOf(';');\n      var quiz = 0 <= separateIndex ? this.quiz.substring(0, separateIndex) : this.quiz;\n      var index = quiz.indexOf(')');\n      if (quiz[index + 1] === ';') {\n        return quiz.substr(index + 1);\n      }\n      return quiz.substr(index + 2);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Quiz.verify = function (quiz) {\n    var replaced = this.trim(quiz);\n    if (replaced.length === 0 || quiz === '#Q=[]()' || !quiz.startsWith('#Q=')) {\n      return quiz;\n    }\n    if (!replaced.match(/^#Q=\\[[TIOSZJL]?]\\([TIOSZJL]?\\)[TIOSZJL]*;?.*$/i)) {\n      throw new Error(\"Current piece doesn't exist, however next pieces exist: \".concat(quiz));\n    }\n    return replaced;\n  };\n  Quiz.prototype.direct = function () {\n    if (this.current === '') {\n      var least = this.leastAfterNext2;\n      return new Quiz(\"#Q=[\".concat(this.hold, \"](\").concat(least[0], \")\").concat(least.substr(1)));\n    }\n    return new Quiz(\"#Q=[\".concat(this.hold, \"](\").concat(this.next, \")\").concat(this.leastAfterNext2));\n  };\n  Quiz.prototype.swap = function () {\n    if (this.hold === '') {\n      throw new Error(\"Cannot find hold piece: \".concat(this.quiz));\n    }\n    var next = this.next;\n    return new Quiz(\"#Q=[\".concat(this.current, \"](\").concat(next, \")\").concat(this.leastAfterNext2));\n  };\n  Quiz.prototype.stock = function () {\n    if (this.hold !== '' || this.next === '') {\n      throw new Error(\"Cannot stock: \".concat(this.quiz));\n    }\n    var least = this.leastAfterNext2;\n    var head = least[0] !== undefined ? least[0] : '';\n    if (1 < least.length) {\n      return new Quiz(\"#Q=[\".concat(this.current, \"](\").concat(head, \")\").concat(least.substr(1)));\n    }\n    return new Quiz(\"#Q=[\".concat(this.current, \"](\").concat(head, \")\"));\n  };\n  Quiz.prototype.operate = function (operation) {\n    switch (operation) {\n      case Operation.Direct:\n        return this.direct();\n      case Operation.Swap:\n        return this.swap();\n      case Operation.Stock:\n        return this.stock();\n    }\n    throw new Error('Unexpected operation');\n  };\n  Quiz.prototype.format = function () {\n    var quiz = this.nextIfEnd();\n    if (quiz.quiz === '#Q=[]()') {\n      return new Quiz('');\n    }\n    var current = quiz.current;\n    var hold = quiz.hold;\n    if (current === '' && hold !== '') {\n      return new Quiz(\"#Q=[](\".concat(hold, \")\").concat(quiz.least));\n    }\n    if (current === '') {\n      var least = quiz.least;\n      var head = least[0];\n      if (head === undefined) {\n        return new Quiz('');\n      }\n      if (head === ';') {\n        return new Quiz(least.substr(1));\n      }\n      return new Quiz(\"#Q=[](\".concat(head, \")\").concat(least.substr(1)));\n    }\n    return quiz;\n  };\n  Quiz.prototype.getHoldPiece = function () {\n    if (!this.canOperate()) {\n      return defines_1.Piece.Empty;\n    }\n    var name = this.hold;\n    if (name === undefined || name === '' || name === ';') {\n      return defines_1.Piece.Empty;\n    }\n    return (0, defines_1.parsePiece)(name);\n  };\n  Quiz.prototype.getNextPieces = function (max) {\n    if (!this.canOperate()) {\n      return max !== undefined ? Array.from({\n        length: max\n      }).map(function () {\n        return defines_1.Piece.Empty;\n      }) : [];\n    }\n    var names = (this.current + this.next + this.leastInActiveBag).substr(0, max);\n    if (max !== undefined && names.length < max) {\n      names += ' '.repeat(max - names.length);\n    }\n    return names.split('').map(function (name) {\n      if (name === undefined || name === ' ' || name === ';') {\n        return defines_1.Piece.Empty;\n      }\n      return (0, defines_1.parsePiece)(name);\n    });\n  };\n  Quiz.prototype.toString = function () {\n    return this.quiz;\n  };\n  Quiz.prototype.canOperate = function () {\n    var quiz = this.quiz;\n    if (quiz.startsWith('#Q=[]();')) {\n      quiz = this.quiz.substr(8);\n    }\n    return quiz.startsWith('#Q=') && quiz !== '#Q=[]()';\n  };\n  Quiz.prototype.nextIfEnd = function () {\n    if (this.quiz.startsWith('#Q=[]();')) {\n      return new Quiz(this.quiz.substr(8));\n    }\n    return this;\n  };\n  return Quiz;\n}();\nexports.Quiz = Quiz;","map":{"version":3,"names":["Object","defineProperty","exports","value","Quiz","defines_1","require","Operation","quiz","verify","prototype","get","index","indexOf","name","undefined","enumerable","configurable","isQuizComment","comment","startsWith","create","first","second","hold","other","parse","s","concat","substring","trim","replace","substr","getOperation","used","usedName","parsePieceName","current","Direct","Swap","next","Stock","Error","separateIndex","replaced","length","match","direct","least","leastAfterNext2","swap","stock","head","operate","operation","format","nextIfEnd","getHoldPiece","canOperate","Piece","Empty","parsePiece","getNextPieces","max","Array","from","map","names","leastInActiveBag","repeat","split","toString"],"sources":["C:/Stuff/Github/peasea/frontend/node_modules/tetris-fumen/lib/quiz.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Quiz = void 0;\nvar defines_1 = require(\"./defines\");\nvar Operation;\n(function (Operation) {\n    Operation[\"Direct\"] = \"direct\";\n    Operation[\"Swap\"] = \"swap\";\n    Operation[\"Stock\"] = \"stock\";\n})(Operation || (Operation = {}));\nvar Quiz = /** @class */ (function () {\n    function Quiz(quiz) {\n        this.quiz = Quiz.verify(quiz);\n    }\n    Object.defineProperty(Quiz.prototype, \"next\", {\n        get: function () {\n            var index = this.quiz.indexOf(')') + 1;\n            var name = this.quiz[index];\n            if (name === undefined || name === ';') {\n                return '';\n            }\n            return name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Quiz.isQuizComment = function (comment) {\n        return comment.startsWith('#Q=');\n    };\n    Quiz.create = function (first, second) {\n        var create = function (hold, other) {\n            var parse = function (s) { return s ? s : ''; };\n            return new Quiz(\"#Q=[\".concat(parse(hold), \"](\").concat(parse(other[0]), \")\").concat(parse(other.substring(1))));\n        };\n        return second !== undefined ? create(first, second) : create(undefined, first);\n    };\n    Quiz.trim = function (quiz) {\n        return quiz.trim().replace(/\\s+/g, '');\n    };\n    Object.defineProperty(Quiz.prototype, \"least\", {\n        get: function () {\n            var index = this.quiz.indexOf(')');\n            return this.quiz.substr(index + 1);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Quiz.prototype, \"current\", {\n        get: function () {\n            var index = this.quiz.indexOf('(') + 1;\n            var name = this.quiz[index];\n            if (name === ')') {\n                return '';\n            }\n            return name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Quiz.prototype, \"hold\", {\n        get: function () {\n            var index = this.quiz.indexOf('[') + 1;\n            var name = this.quiz[index];\n            if (name === ']') {\n                return '';\n            }\n            return name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Quiz.prototype, \"leastAfterNext2\", {\n        get: function () {\n            var index = this.quiz.indexOf(')');\n            if (this.quiz[index + 1] === ';') {\n                return this.quiz.substr(index + 1);\n            }\n            return this.quiz.substr(index + 2);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Quiz.prototype.getOperation = function (used) {\n        var usedName = (0, defines_1.parsePieceName)(used);\n        var current = this.current;\n        if (usedName === current) {\n            return Operation.Direct;\n        }\n        var hold = this.hold;\n        if (usedName === hold) {\n            return Operation.Swap;\n        }\n        // 次のミノを利用できる\n        if (hold === '') {\n            if (usedName === this.next) {\n                return Operation.Stock;\n            }\n        }\n        else {\n            if (current === '' && usedName === this.next) {\n                return Operation.Direct;\n            }\n        }\n        throw new Error(\"Unexpected hold piece in quiz: \".concat(this.quiz));\n    };\n    Object.defineProperty(Quiz.prototype, \"leastInActiveBag\", {\n        get: function () {\n            var separateIndex = this.quiz.indexOf(';');\n            var quiz = 0 <= separateIndex ? this.quiz.substring(0, separateIndex) : this.quiz;\n            var index = quiz.indexOf(')');\n            if (quiz[index + 1] === ';') {\n                return quiz.substr(index + 1);\n            }\n            return quiz.substr(index + 2);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Quiz.verify = function (quiz) {\n        var replaced = this.trim(quiz);\n        if (replaced.length === 0 || quiz === '#Q=[]()' || !quiz.startsWith('#Q=')) {\n            return quiz;\n        }\n        if (!replaced.match(/^#Q=\\[[TIOSZJL]?]\\([TIOSZJL]?\\)[TIOSZJL]*;?.*$/i)) {\n            throw new Error(\"Current piece doesn't exist, however next pieces exist: \".concat(quiz));\n        }\n        return replaced;\n    };\n    Quiz.prototype.direct = function () {\n        if (this.current === '') {\n            var least = this.leastAfterNext2;\n            return new Quiz(\"#Q=[\".concat(this.hold, \"](\").concat(least[0], \")\").concat(least.substr(1)));\n        }\n        return new Quiz(\"#Q=[\".concat(this.hold, \"](\").concat(this.next, \")\").concat(this.leastAfterNext2));\n    };\n    Quiz.prototype.swap = function () {\n        if (this.hold === '') {\n            throw new Error(\"Cannot find hold piece: \".concat(this.quiz));\n        }\n        var next = this.next;\n        return new Quiz(\"#Q=[\".concat(this.current, \"](\").concat(next, \")\").concat(this.leastAfterNext2));\n    };\n    Quiz.prototype.stock = function () {\n        if (this.hold !== '' || this.next === '') {\n            throw new Error(\"Cannot stock: \".concat(this.quiz));\n        }\n        var least = this.leastAfterNext2;\n        var head = least[0] !== undefined ? least[0] : '';\n        if (1 < least.length) {\n            return new Quiz(\"#Q=[\".concat(this.current, \"](\").concat(head, \")\").concat(least.substr(1)));\n        }\n        return new Quiz(\"#Q=[\".concat(this.current, \"](\").concat(head, \")\"));\n    };\n    Quiz.prototype.operate = function (operation) {\n        switch (operation) {\n            case Operation.Direct:\n                return this.direct();\n            case Operation.Swap:\n                return this.swap();\n            case Operation.Stock:\n                return this.stock();\n        }\n        throw new Error('Unexpected operation');\n    };\n    Quiz.prototype.format = function () {\n        var quiz = this.nextIfEnd();\n        if (quiz.quiz === '#Q=[]()') {\n            return new Quiz('');\n        }\n        var current = quiz.current;\n        var hold = quiz.hold;\n        if (current === '' && hold !== '') {\n            return new Quiz(\"#Q=[](\".concat(hold, \")\").concat(quiz.least));\n        }\n        if (current === '') {\n            var least = quiz.least;\n            var head = least[0];\n            if (head === undefined) {\n                return new Quiz('');\n            }\n            if (head === ';') {\n                return new Quiz(least.substr(1));\n            }\n            return new Quiz(\"#Q=[](\".concat(head, \")\").concat(least.substr(1)));\n        }\n        return quiz;\n    };\n    Quiz.prototype.getHoldPiece = function () {\n        if (!this.canOperate()) {\n            return defines_1.Piece.Empty;\n        }\n        var name = this.hold;\n        if (name === undefined || name === '' || name === ';') {\n            return defines_1.Piece.Empty;\n        }\n        return (0, defines_1.parsePiece)(name);\n    };\n    Quiz.prototype.getNextPieces = function (max) {\n        if (!this.canOperate()) {\n            return max !== undefined ? Array.from({ length: max }).map(function () { return defines_1.Piece.Empty; }) : [];\n        }\n        var names = (this.current + this.next + this.leastInActiveBag).substr(0, max);\n        if (max !== undefined && names.length < max) {\n            names += ' '.repeat(max - names.length);\n        }\n        return names.split('').map(function (name) {\n            if (name === undefined || name === ' ' || name === ';') {\n                return defines_1.Piece.Empty;\n            }\n            return (0, defines_1.parsePiece)(name);\n        });\n    };\n    Quiz.prototype.toString = function () {\n        return this.quiz;\n    };\n    Quiz.prototype.canOperate = function () {\n        var quiz = this.quiz;\n        if (quiz.startsWith('#Q=[]();')) {\n            quiz = this.quiz.substr(8);\n        }\n        return quiz.startsWith('#Q=') && quiz !== '#Q=[]()';\n    };\n    Quiz.prototype.nextIfEnd = function () {\n        if (this.quiz.startsWith('#Q=[]();')) {\n            return new Quiz(this.quiz.substr(8));\n        }\n        return this;\n    };\n    return Quiz;\n}());\nexports.Quiz = Quiz;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}