{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Buffer = void 0;\nvar ENCODE_TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nvar Buffer = /** @class */function () {\n  function Buffer(data) {\n    if (data === void 0) {\n      data = '';\n    }\n    this.values = data.split('').map(decodeToValue);\n  }\n  Buffer.prototype.poll = function (max) {\n    var value = 0;\n    for (var count = 0; count < max; count += 1) {\n      var v = this.values.shift();\n      if (v === undefined) {\n        throw new Error('Unexpected fumen');\n      }\n      value += v * Math.pow(Buffer.tableLength, count);\n    }\n    return value;\n  };\n  Buffer.prototype.push = function (value, splitCount) {\n    if (splitCount === void 0) {\n      splitCount = 1;\n    }\n    var current = value;\n    for (var count = 0; count < splitCount; count += 1) {\n      this.values.push(current % Buffer.tableLength);\n      current = Math.floor(current / Buffer.tableLength);\n    }\n  };\n  Buffer.prototype.merge = function (postBuffer) {\n    for (var _i = 0, _a = postBuffer.values; _i < _a.length; _i++) {\n      var value = _a[_i];\n      this.values.push(value);\n    }\n  };\n  Buffer.prototype.isEmpty = function () {\n    return this.values.length === 0;\n  };\n  Object.defineProperty(Buffer.prototype, \"length\", {\n    get: function () {\n      return this.values.length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Buffer.prototype.get = function (index) {\n    return this.values[index];\n  };\n  Buffer.prototype.set = function (index, value) {\n    this.values[index] = value;\n  };\n  Buffer.prototype.toString = function () {\n    return this.values.map(encodeFromValue).join('');\n  };\n  Buffer.tableLength = ENCODE_TABLE.length;\n  return Buffer;\n}();\nexports.Buffer = Buffer;\nfunction decodeToValue(v) {\n  return ENCODE_TABLE.indexOf(v);\n}\nfunction encodeFromValue(index) {\n  return ENCODE_TABLE[index];\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","Buffer","ENCODE_TABLE","data","values","split","map","decodeToValue","prototype","poll","max","count","v","shift","undefined","Error","Math","pow","tableLength","push","splitCount","current","floor","merge","postBuffer","_i","_a","length","isEmpty","get","enumerable","configurable","index","set","toString","encodeFromValue","join","indexOf"],"sources":["C:/Stuff/Github/peasea/node_modules/tetris-fumen/lib/buffer.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Buffer = void 0;\nvar ENCODE_TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nvar Buffer = /** @class */ (function () {\n    function Buffer(data) {\n        if (data === void 0) { data = ''; }\n        this.values = data.split('').map(decodeToValue);\n    }\n    Buffer.prototype.poll = function (max) {\n        var value = 0;\n        for (var count = 0; count < max; count += 1) {\n            var v = this.values.shift();\n            if (v === undefined) {\n                throw new Error('Unexpected fumen');\n            }\n            value += v * Math.pow(Buffer.tableLength, count);\n        }\n        return value;\n    };\n    Buffer.prototype.push = function (value, splitCount) {\n        if (splitCount === void 0) { splitCount = 1; }\n        var current = value;\n        for (var count = 0; count < splitCount; count += 1) {\n            this.values.push(current % Buffer.tableLength);\n            current = Math.floor(current / Buffer.tableLength);\n        }\n    };\n    Buffer.prototype.merge = function (postBuffer) {\n        for (var _i = 0, _a = postBuffer.values; _i < _a.length; _i++) {\n            var value = _a[_i];\n            this.values.push(value);\n        }\n    };\n    Buffer.prototype.isEmpty = function () {\n        return this.values.length === 0;\n    };\n    Object.defineProperty(Buffer.prototype, \"length\", {\n        get: function () {\n            return this.values.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Buffer.prototype.get = function (index) {\n        return this.values[index];\n    };\n    Buffer.prototype.set = function (index, value) {\n        this.values[index] = value;\n    };\n    Buffer.prototype.toString = function () {\n        return this.values.map(encodeFromValue).join('');\n    };\n    Buffer.tableLength = ENCODE_TABLE.length;\n    return Buffer;\n}());\nexports.Buffer = Buffer;\nfunction decodeToValue(v) {\n    return ENCODE_TABLE.indexOf(v);\n}\nfunction encodeFromValue(index) {\n    return ENCODE_TABLE[index];\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}